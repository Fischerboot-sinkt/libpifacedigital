\hypertarget{pifacedigital_8h}{\section{/home/tom/\-Work/pifacehome/libpifacedigital/src/pifacedigital.h File Reference}
\label{pifacedigital_8h}\index{/home/tom/\-Work/pifacehome/libpifacedigital/src/pifacedigital.\-h@{/home/tom/\-Work/pifacehome/libpifacedigital/src/pifacedigital.\-h}}
}


A simple static library for controlling Pi\-Face Digital. See mcp23s17.\-h for more register definitions.  


{\ttfamily \#include $<$stdint.\-h$>$}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{pifacedigital_8h_a61a3c9a18380aafb6e430e79bf596557}{\#define {\bfseries O\-U\-T\-P\-U\-T}~0x12}\label{pifacedigital_8h_a61a3c9a18380aafb6e430e79bf596557}

\item 
\hypertarget{pifacedigital_8h_a1bb283bd7893b9855e2f23013891fc82}{\#define {\bfseries I\-N\-P\-U\-T}~0x13}\label{pifacedigital_8h_a1bb283bd7893b9855e2f23013891fc82}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{pifacedigital_8h_a5efe623c2f77cd5fc0cfca2d72191cd9}{pifacedigital\-\_\-open} (uint8\-\_\-t hw\-\_\-addr)
\item 
int \hyperlink{pifacedigital_8h_a6d1d9fd48114430241de9a5cf9696eff}{pifacedigital\-\_\-open\-\_\-noinit} (uint8\-\_\-t hw\-\_\-addr)
\item 
void \hyperlink{pifacedigital_8h_a928e3e91da4cf835d521ff2ad165c0b6}{pifacedigital\-\_\-close} (uint8\-\_\-t hw\-\_\-addr)
\item 
uint8\-\_\-t \hyperlink{pifacedigital_8h_ad2f6e3aae70bb07c0b53e141c34f4a87}{pifacedigital\-\_\-read\-\_\-reg} (uint8\-\_\-t reg, uint8\-\_\-t hw\-\_\-addr)
\item 
void \hyperlink{pifacedigital_8h_a773ae224a54e7e122ca300f2cd969561}{pifacedigital\-\_\-write\-\_\-reg} (uint8\-\_\-t data, uint8\-\_\-t reg, uint8\-\_\-t hw\-\_\-addr)
\item 
uint8\-\_\-t \hyperlink{pifacedigital_8h_a78812b4e8d096d915bdea41b1ca58c5a}{pifacedigital\-\_\-read\-\_\-bit} (uint8\-\_\-t bit\-\_\-num, uint8\-\_\-t reg, uint8\-\_\-t hw\-\_\-addr)
\item 
void \hyperlink{pifacedigital_8h_ac22e9aa9c327da31c493bebfe2b60c2e}{pifacedigital\-\_\-write\-\_\-bit} (uint8\-\_\-t data, uint8\-\_\-t bit\-\_\-num, uint8\-\_\-t reg, uint8\-\_\-t hw\-\_\-addr)
\item 
uint8\-\_\-t \hyperlink{pifacedigital_8h_a633b5a22693f87ab0c1d4cd1cb80d287}{pifacedigital\-\_\-digital\-\_\-read} (uint8\-\_\-t pin\-\_\-num)
\item 
void \hyperlink{pifacedigital_8h_a8c0719d0e4da55d5272b855200c95aa3}{pifacedigital\-\_\-digital\-\_\-write} (uint8\-\_\-t pin\-\_\-num, uint8\-\_\-t value)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A simple static library for controlling Pi\-Face Digital. See mcp23s17.\-h for more register definitions. Copyright (C) 2013 Thomas Preston \href{mailto:thomas.preston@openlx.org.uk}{\tt thomas.\-preston@openlx.\-org.\-uk}

This program is free software\-: you can redistribute it and/or modify it under the terms of the G\-N\-U General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U General Public License for more details.

You should have received a copy of the G\-N\-U General Public License along with this program. If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}. 

\subsection{Function Documentation}
\hypertarget{pifacedigital_8h_a928e3e91da4cf835d521ff2ad165c0b6}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-close@{pifacedigital\-\_\-close}}
\index{pifacedigital\-\_\-close@{pifacedigital\-\_\-close}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}void pifacedigital\-\_\-close (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{hw\-\_\-addr}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_a928e3e91da4cf835d521ff2ad165c0b6}
Closes a Pi\-Face Digital with the specified hardware address (turns off interrupts, closes file descriptor if it is no longer needed).

Example\-: \begin{DoxyVerb}pifacedigital_close(0);
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em hw\-\_\-addr} & The hardware address (configure with jumpers\-: J\-P1 and J\-P2). \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_a633b5a22693f87ab0c1d4cd1cb80d287}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-digital\-\_\-read@{pifacedigital\-\_\-digital\-\_\-read}}
\index{pifacedigital\-\_\-digital\-\_\-read@{pifacedigital\-\_\-digital\-\_\-read}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-digital\-\_\-read}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t pifacedigital\-\_\-digital\-\_\-read (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{pin\-\_\-num}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_a633b5a22693f87ab0c1d4cd1cb80d287}
Read from the input port on Pi\-Face Digital 0. If you want to read from other ports or Pi\-Face Digital's with other hardware addresses then use the more powerful function $<$pifacedigital\-\_\-read\-\_\-bit$>$\char`\"{}()\char`\"{}.

Example (read from bit 6 of I\-N\-P\-U\-T on Pi\-Face Digital 0)\-: \begin{DoxyVerb}pifacedigital_digital_read(6);
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em pin\-\_\-num} & The pin number to read from. \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_a8c0719d0e4da55d5272b855200c95aa3}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-digital\-\_\-write@{pifacedigital\-\_\-digital\-\_\-write}}
\index{pifacedigital\-\_\-digital\-\_\-write@{pifacedigital\-\_\-digital\-\_\-write}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-digital\-\_\-write}]{\setlength{\rightskip}{0pt plus 5cm}void pifacedigital\-\_\-digital\-\_\-write (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{pin\-\_\-num, }
\item[{uint8\-\_\-t}]{value}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_a8c0719d0e4da55d5272b855200c95aa3}
Write to the output port on Pi\-Face Digital 0. If you want to write to other ports or Pi\-Face Digital's with other hardware addresses then use the more powerful function $<$pifacedigital\-\_\-write\-\_\-bit$>$\char`\"{}()\char`\"{}.

Example (write 1 to bit 3 of O\-U\-T\-P\-U\-T on Pi\-Face Digital 0)\-: \begin{DoxyVerb}pifacedigital_digital_write(3, 1);
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em pin\-\_\-num} & The pin number to write to. \\
\hline
{\em value} & The value to write. \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_a5efe623c2f77cd5fc0cfca2d72191cd9}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-open@{pifacedigital\-\_\-open}}
\index{pifacedigital\-\_\-open@{pifacedigital\-\_\-open}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-open}]{\setlength{\rightskip}{0pt plus 5cm}int pifacedigital\-\_\-open (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{hw\-\_\-addr}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_a5efe623c2f77cd5fc0cfca2d72191cd9}
Opens and initialises a Pi\-Face Digital with the specified hardware address. Returns a file descriptor for making raw S\-P\-I transactions to the M\-C\-P23\-S17 (for advanced users only).

Example\-: \begin{DoxyVerb}pifacedigital_open(0);
int pifacedigital_fd = pifacedigital_open(0); // advanced
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em hw\-\_\-addr} & The hardware address (configure with jumpers\-: J\-P1 and J\-P2). \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_a6d1d9fd48114430241de9a5cf9696eff}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-open\-\_\-noinit@{pifacedigital\-\_\-open\-\_\-noinit}}
\index{pifacedigital\-\_\-open\-\_\-noinit@{pifacedigital\-\_\-open\-\_\-noinit}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-open\-\_\-noinit}]{\setlength{\rightskip}{0pt plus 5cm}int pifacedigital\-\_\-open\-\_\-noinit (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{hw\-\_\-addr}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_a6d1d9fd48114430241de9a5cf9696eff}
Opens a Pi\-Face Digital with the specified hardware address without initialising it. Returns a file descriptor for making raw S\-P\-I transactions to the M\-C\-P23\-S17 (for advanced users only).

Example\-: \begin{DoxyVerb}pifacedigital_open_noinit(0);
int pifacedigital_fd = pifacedigital_open_noinit(0); // advanced
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em hw\-\_\-addr} & The hardware address (configure with jumpers\-: J\-P1 and J\-P2). \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_a78812b4e8d096d915bdea41b1ca58c5a}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-read\-\_\-bit@{pifacedigital\-\_\-read\-\_\-bit}}
\index{pifacedigital\-\_\-read\-\_\-bit@{pifacedigital\-\_\-read\-\_\-bit}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-read\-\_\-bit}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t pifacedigital\-\_\-read\-\_\-bit (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{bit\-\_\-num, }
\item[{uint8\-\_\-t}]{reg, }
\item[{uint8\-\_\-t}]{hw\-\_\-addr}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_a78812b4e8d096d915bdea41b1ca58c5a}
Read a bit from a register on Pi\-Face Digital.

Example (read bit 3 of I\-N\-P\-U\-T on Pi\-Face Digital 0)\-: \begin{DoxyVerb}uint8_t bit_value = pifacedigital_read_bit(3, INPUT, 0);
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em bit\-\_\-num} & The bit number to read from. \\
\hline
{\em reg} & The register to write to (example\-: I\-N\-P\-U\-T, O\-U\-T\-P\-U\-T, G\-P\-P\-U\-B). \\
\hline
{\em hw\-\_\-addr} & The hardware address (configure with jumpers\-: J\-P1 and J\-P2). \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_ad2f6e3aae70bb07c0b53e141c34f4a87}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-read\-\_\-reg@{pifacedigital\-\_\-read\-\_\-reg}}
\index{pifacedigital\-\_\-read\-\_\-reg@{pifacedigital\-\_\-read\-\_\-reg}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-read\-\_\-reg}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t pifacedigital\-\_\-read\-\_\-reg (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{reg, }
\item[{uint8\-\_\-t}]{hw\-\_\-addr}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_ad2f6e3aae70bb07c0b53e141c34f4a87}
Reads a register from Pi\-Face Digital.

Example (read I\-N\-P\-U\-T from Pi\-Face Digital 0)\-: \begin{DoxyVerb}uint8_t value = pifacedigital_read_reg(INPUT, 0);
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em reg} & The register to read from (example\-: I\-N\-P\-U\-T, O\-U\-T\-P\-U\-T). \\
\hline
{\em hw\-\_\-addr} & The hardware address (configure with jumpers\-: J\-P1 and J\-P2). \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_ac22e9aa9c327da31c493bebfe2b60c2e}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-write\-\_\-bit@{pifacedigital\-\_\-write\-\_\-bit}}
\index{pifacedigital\-\_\-write\-\_\-bit@{pifacedigital\-\_\-write\-\_\-bit}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-write\-\_\-bit}]{\setlength{\rightskip}{0pt plus 5cm}void pifacedigital\-\_\-write\-\_\-bit (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{data, }
\item[{uint8\-\_\-t}]{bit\-\_\-num, }
\item[{uint8\-\_\-t}]{reg, }
\item[{uint8\-\_\-t}]{hw\-\_\-addr}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_ac22e9aa9c327da31c493bebfe2b60c2e}
Writes to a bit on a register on Pi\-Face Digital.

Example (write 1 to bit 3 of O\-U\-T\-P\-U\-T on Pi\-Face Digital 0)\-: \begin{DoxyVerb}pifacedigital_write_bit(1, 3, OUTPUT, 0);
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em data} & The value to write. \\
\hline
{\em bit\-\_\-num} & The bit number to read from. \\
\hline
{\em reg} & The register to write to (example\-: I\-N\-P\-U\-T, O\-U\-T\-P\-U\-T, G\-P\-P\-U\-B). \\
\hline
{\em hw\-\_\-addr} & The hardware address (configure with jumpers\-: J\-P1 and J\-P2). \\
\hline
\end{DoxyParams}
\hypertarget{pifacedigital_8h_a773ae224a54e7e122ca300f2cd969561}{\index{pifacedigital.\-h@{pifacedigital.\-h}!pifacedigital\-\_\-write\-\_\-reg@{pifacedigital\-\_\-write\-\_\-reg}}
\index{pifacedigital\-\_\-write\-\_\-reg@{pifacedigital\-\_\-write\-\_\-reg}!pifacedigital.h@{pifacedigital.\-h}}
\subsubsection[{pifacedigital\-\_\-write\-\_\-reg}]{\setlength{\rightskip}{0pt plus 5cm}void pifacedigital\-\_\-write\-\_\-reg (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{data, }
\item[{uint8\-\_\-t}]{reg, }
\item[{uint8\-\_\-t}]{hw\-\_\-addr}
\end{DoxyParamCaption}
)}}\label{pifacedigital_8h_a773ae224a54e7e122ca300f2cd969561}
Writes to a register on Pi\-Face Digital.

Example (write 0xaa to O\-U\-T\-P\-U\-T on Pi\-Face Digital 0)\-: \begin{DoxyVerb}pifacedigital_write_reg(0xaa, OUTPUT, 0);
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em data} & The byte to write. \\
\hline
{\em reg} & The register to write to (example\-: I\-N\-P\-U\-T, O\-U\-T\-P\-U\-T, G\-P\-P\-U\-B). \\
\hline
{\em hw\-\_\-addr} & The hardware address (configure with jumpers\-: J\-P1 and J\-P2). \\
\hline
\end{DoxyParams}
